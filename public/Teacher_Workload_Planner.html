<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Workload Planner | ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        
        /* Chart Container Styling - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Scrollbar for tables/lists */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 3px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        /* Card Hover Effects */
        .interactive-card {
            transition: all 0.3s ease;
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <!-- Chosen Palette: Academic Calm (Deep Blue, Teal, Coral) -->
    <!-- Application Structure Plan: 
         1. Hero: Displays fixed KPIs (Targets).
         2. Simulator: Main interactive area. Left col: Inputs (Teaching, Research, Service). Right col: Real-time Feedback (Gauge, Composition).
         3. Analysis: Explains the math behind the simulator using charts (Multipliers, Research Points).
         This structure empowers the user to 'play' with the data first, then understand the detailed rules. 
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 text-slate-800 antialiased">

    <!-- Navigation / Header -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center gap-2">
                        <div class="w-8 h-8 bg-blue-800 rounded-lg flex items-center justify-center text-white font-bold text-lg">W</div>
                        <h1 class="text-xl font-bold text-slate-800">Workload Planner</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-slate-500 hidden sm:block">‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏ß‡∏á‡∏©‡πå‡∏ä‡∏ß‡∏•‡∏¥‡∏ï‡∏Å‡∏∏‡∏•</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

        <!-- 1. INTRO & TARGETS -->
        <section class="space-y-6">
            <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-3xl font-bold text-slate-900">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (Your Targets)</h2>
                <p class="text-lg text-slate-600 mt-2">
                    ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏∏‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡πÇ‡∏î‡∏¢‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å "‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á" ‡∏Ñ‡∏π‡∏ì‡∏î‡πâ‡∏ß‡∏¢ "‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏á‡πà‡∏≤‡∏¢"
                </p>
            </div>

            <!-- KPI Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-600 interactive-card">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-sm font-medium text-slate-500 uppercase tracking-wide">‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</p>
                            <h3 class="text-4xl font-extrabold text-blue-700 mt-2">35</h3>
                            <p class="text-sm text-slate-600 mt-1">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô</p>
                        </div>
                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-xl">W</div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-teal-500 interactive-card">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-sm font-medium text-slate-500 uppercase tracking-wide">‡∏£‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</p>
                            <h3 class="text-4xl font-extrabold text-teal-600 mt-2">525</h3>
                            <p class="text-sm text-slate-600 mt-1">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô (15 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</p>
                        </div>
                        <div class="w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center text-teal-600 font-bold text-xl">S</div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-coral-500 border-rose-500 interactive-card">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-sm font-medium text-slate-500 uppercase tracking-wide">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</p>
                            <h3 class="text-4xl font-extrabold text-rose-600 mt-2">1,330</h3>
                            <p class="text-sm text-slate-600 mt-1">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô (38 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</p>
                        </div>
                        <div class="w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center text-rose-600 font-bold text-xl">Y</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. SIMULATOR DASHBOARD -->
        <section class="bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-200">
            <div class="bg-slate-900 px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
                <div>
                    <h2 class="text-xl font-bold text-white">üßÆ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô (Workload Simulator)</h2>
                    <p class="text-blue-200 text-sm">‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà</p>
                </div>
                <div class="flex gap-2 text-xs font-semibold">
                    <span class="px-3 py-1 bg-blue-600 text-white rounded-full">Teaching x3.0+</span>
                    <span class="px-3 py-1 bg-rose-600 text-white rounded-full">Research Boosters</span>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 divide-y lg:divide-y-0 lg:divide-x divide-slate-200">
                
                <!-- LEFT: INPUTS (7 Columns) -->
                <div class="lg:col-span-7 p-6 space-y-8">
                    
                    <!-- Input Group 1: Teaching -->
                    <div>
                        <div class="flex items-center gap-2 mb-4">
                            <span class="w-8 h-8 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-bold">1</span>
                            <h3 class="text-lg font-bold text-slate-800">‡∏á‡∏≤‡∏ô‡∏™‡∏≠‡∏ô (Teaching)</h3>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö / ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ß‡∏¥‡∏ä‡∏≤</label>
                                    <select id="teachType" class="w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border bg-white">
                                        <option value="3.0">‡∏õ.‡∏ï‡∏£‡∏µ ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢ (x3.0)</option>
                                        <option value="1.5">‡∏õ.‡∏ï‡∏£‡∏µ ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ (x1.5)</option>
                                        <option value="3.5">‡∏õ.‡πÇ‡∏ó ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢ (x3.5)</option>
                                        <option value="4.0">‡∏õ.‡πÄ‡∏≠‡∏Å ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢ (x4.0)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏ô‡∏®. (‡∏Ñ‡∏ô)</label>
                                    <select id="classSize" class="w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border bg-white">
                                        <option value="0">‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 50 (‡∏õ‡∏Å‡∏ï‡∏¥)</option>
                                        <option value="0.1">51 - 100 (+0.1)</option>
                                        <option value="0.2">101 - 150 (+0.2)</option>
                                        <option value="0.3">151 - 200 (+0.3)</option>
                                        <option value="0.5">‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 200 (+0.5)</option>
                                    </select>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-slate-700 mb-1">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏™‡∏≠‡∏ô‡∏à‡∏£‡∏¥‡∏á / ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</label>
                                    <div class="flex gap-2">
                                        <input type="number" id="teachHours" class="flex-1 rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border" placeholder="‡πÄ‡∏ä‡πà‡∏ô 3" min="1">
                                        <button onclick="addTeaching()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium transition-colors">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
                                    </div>
                                </div>
                            </div>
                            <!-- List of added teaching -->
                            <ul id="teachingList" class="space-y-2 text-sm text-slate-600 max-h-32 overflow-y-auto custom-scroll p-1">
                                <!-- JS will populate -->
                                <li class="text-slate-400 italic text-center py-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Input Group 2: Research -->
                    <div>
                        <div class="flex items-center gap-2 mb-4">
                            <span class="w-8 h-8 rounded-full bg-rose-100 text-rose-700 flex items-center justify-center font-bold">2</span>
                            <h3 class="text-lg font-bold text-slate-800">‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢ & ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ (Research & Service)</h3>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-4">
                            <div class="flex flex-col md:flex-row gap-2">
                                <select id="researchType" class="flex-1 rounded-md border-slate-300 shadow-sm focus:border-rose-500 focus:ring-rose-500 p-2 border bg-white">
                                    <optgroup label="‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢ (‡πÄ‡∏´‡∏°‡∏≤‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á)">
                                        <option value="300">‡∏ó‡∏∏‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å >50k (300 ‡∏ä‡∏°.)</option>
                                        <option value="200">‡∏ó‡∏∏‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å <50k (200 ‡∏ä‡∏°.)</option>
                                        <option value="200">‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏≤‡∏ô‡∏≤‡∏ä‡∏≤‡∏ï‡∏¥ ISI/Scopus (200 ‡∏ä‡∏°.)</option>
                                        <option value="160">‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° TCI 1 (160 ‡∏ä‡∏°.)</option>
                                        <option value="80">Proceeding ‡∏ô‡∏≤‡∏ô‡∏≤‡∏ä‡∏≤‡∏ï‡∏¥ (80 ‡∏ä‡∏°.)</option>
                                    </optgroup>
                                    <optgroup label="‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ (‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£)">
                                        <option value="20">Reviewer Eng (20 ‡∏ä‡∏°.)</option>
                                        <option value="10">Reviewer ‡πÑ‡∏ó‡∏¢ (10 ‡∏ä‡∏°.)</option>
                                        <option value="15">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£ (3 ‡∏ä‡∏°.‡∏à‡∏£‡∏¥‡∏á = 5 ‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô)</option>
                                        <option value="20">‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (20 ‡∏ä‡∏°.)</option>
                                    </optgroup>
                                </select>
                                <button onclick="addResearch()" class="bg-rose-600 hover:bg-rose-700 text-white px-4 py-2 rounded-md font-medium transition-colors">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
                            </div>
                            <!-- List of added research -->
                            <ul id="researchList" class="space-y-2 text-sm text-slate-600 max-h-32 overflow-y-auto custom-scroll p-1">
                                <li class="text-slate-400 italic text-center py-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Reset Button -->
                    <div class="text-right">
                        <button onclick="resetData()" class="text-sm text-slate-500 hover:text-red-600 underline">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    </div>

                </div>

                <!-- RIGHT: OUTPUTS (5 Columns) -->
                <div class="lg:col-span-5 bg-slate-50 p-6 flex flex-col items-center justify-center space-y-8 sticky top-0">
                    
                    <!-- Annual Progress -->
                    <div class="w-full text-center">
                        <h4 class="text-sm font-bold text-slate-500 uppercase mb-4">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏õ‡∏µ (Annual Progress)</h4>
                        <div class="relative w-48 h-48 mx-auto">
                            <!-- Canvas for Gauge -->
                            <canvas id="gaugeChart"></canvas>
                            <!-- Center Text -->
                            <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                                <span id="totalAnnualHours" class="text-3xl font-extrabold text-slate-800">0</span>
                                <span class="text-xs text-slate-500">/ 1,330 ‡∏ä‡∏°.</span>
                            </div>
                        </div>
                        <p id="gaugeStatus" class="text-sm font-medium mt-2 text-rose-500">‡∏¢‡∏±‡∏á‡∏Ç‡∏≤‡∏î‡∏≠‡∏µ‡∏Å 1,330 ‡∏ä‡∏°.</p>
                    </div>

                    <!-- Weekly Estimate -->
                    <div class="w-full bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-semibold text-slate-600">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</span>
                            <span class="text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 35 ‡∏ä‡∏°.</span>
                        </div>
                        <div class="flex items-baseline gap-2">
                            <span id="weeklyAvg" class="text-2xl font-bold text-blue-600">0.0</span>
                            <span class="text-sm text-slate-400">‡∏ä‡∏°./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</span>
                        </div>
                        <div class="w-full bg-slate-200 rounded-full h-2.5 mt-2">
                            <div id="weeklyBar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                        <p class="text-xs text-slate-400 mt-2">*‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ 38 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</p>
                    </div>

                    <!-- Composition Chart -->
                    <div class="w-full h-40">
                         <div class="chart-container" style="height: 160px; max-width: 100%;">
                            <canvas id="compositionChart"></canvas>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- 3. DEEP DIVE & ANALYSIS -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            
            <!-- Teaching Analysis -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-slate-200">
                <div class="mb-4">
                    <h3 class="text-lg font-bold text-blue-800">‡∏ó‡∏≥‡πÑ‡∏°‡∏á‡∏≤‡∏ô‡∏™‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏π‡∏ì‡πÄ‡∏¢‡∏≠‡∏∞?</h3>
                    <p class="text-sm text-slate-600">
                        ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ "‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏™‡∏≠‡∏ô‡∏à‡∏£‡∏¥‡∏á" ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏ß‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö ‡∏¢‡∏¥‡πà‡∏á‡∏Ñ‡∏•‡∏≤‡∏™‡πÉ‡∏´‡∏ç‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏Å
                    </p>
                </div>
                <div class="chart-container">
                    <canvas id="teachingMultiplierChart"></canvas>
                </div>
            </div>

            <!-- Research Analysis -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-slate-200">
                <div class="mb-4">
                    <h3 class="text-lg font-bold text-rose-800">‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏π‡πà‡∏ó‡∏≤‡∏á‡∏•‡∏±‡∏î (The Research Booster)</h3>
                    <p class="text-sm text-slate-600">
                        ‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢ 1 ‡∏ä‡∏¥‡πâ‡∏ô ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏ó‡∏≠‡∏° ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô (ROI) ‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
                    </p>
                </div>
                <div class="chart-container">
                    <canvas id="researchRoiChart"></canvas>
                </div>
            </div>

        </section>

        <!-- 4. RULES SUMMARY (Textual) -->
        <section class="bg-slate-100 rounded-xl p-8 border border-slate-200">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Quick Rules)</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h4 class="font-bold text-blue-700 mb-2">üéì ‡∏á‡∏≤‡∏ô‡∏™‡∏≠‡∏ô</h4>
                    <ul class="list-disc list-inside text-sm text-slate-700 space-y-1">
                        <li>‡∏õ.‡∏ï‡∏£‡∏µ ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢ = x3.0</li>
                        <li>‡∏õ.‡∏ï‡∏£‡∏µ ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ = x1.5</li>
                        <li>‡∏ô‡∏®. 51-100 ‡∏Ñ‡∏ô = x3.1</li>
                        <li>‡∏ô‡∏®. >200 ‡∏Ñ‡∏ô = x3.5</li>
                        <li>‡∏õ.‡πÇ‡∏ó ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢ = x3.5</li>
                        <li>‡∏õ.‡πÄ‡∏≠‡∏Å ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢ = x4.0</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-rose-700 mb-2">üî¨ ‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h4>
                    <ul class="list-disc list-inside text-sm text-slate-700 space-y-1">
                        <li>‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏≤‡∏ô‡∏≤‡∏ä‡∏≤‡∏ï‡∏¥ (ISI) = 200 ‡∏ä‡∏°.</li>
                        <li>‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° TCI ‡∏Å‡∏•‡∏∏‡πà‡∏° 1 = 160 ‡∏ä‡∏°.</li>
                        <li>‡∏ó‡∏∏‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (>50k) = 300 ‡∏ä‡∏°.</li>
                        <li>‡∏ï‡∏≥‡∏£‡∏≤ (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢) = 300 ‡∏ä‡∏°.</li>
                        <li>‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏ö‡∏±‡∏ï‡∏£ = 300-400 ‡∏ä‡∏°.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-teal-700 mb-2">ü§ù ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£/‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£</h4>
                    <ul class="list-disc list-inside text-sm text-slate-700 space-y-1">
                        <li>‡∏≠‡∏ò‡∏¥‡∏Å‡∏≤‡∏£‡∏ö‡∏î‡∏µ = 35 ‡∏ä‡∏°./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</li>
                        <li>‡∏Ñ‡∏ì‡∏ö‡∏î‡∏µ = 25 ‡∏ä‡∏°./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</li>
                        <li>‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ = 10 ‡∏ä‡∏°./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</li>
                        <li>‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å = 5 ‡∏ä‡∏°. (‡∏ï‡πà‡∏≠ 3 ‡∏ä‡∏°.‡∏à‡∏£‡∏¥‡∏á)</li>
                        <li>Reviewer = 10-20 ‡∏ä‡∏°./‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-400 py-8 text-center mt-12">
        <p class="text-sm">Based on: ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏ß‡∏á‡∏©‡πå‡∏ä‡∏ß‡∏•‡∏¥‡∏ï‡∏Å‡∏∏‡∏•</p>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- DATA STATE ---
        let appState = {
            teachingItems: [],
            researchItems: [],
            totalTeachingHours: 0,
            totalResearchHours: 0,
            grandTotal: 0
        };

        const WEEKS_PER_YEAR_AVG = 30; // Approx weeks of teaching per year (2 semesters x 15)
        const WEEKS_FOR_CALC = 38; // Denominator for weekly average as per doc

        // --- CHART INSTANCES ---
        let gaugeChartInstance = null;
        let compositionChartInstance = null;

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            updateDashboard();
        });

        // --- FUNCTIONS ---

        function addTeaching() {
            const hours = parseFloat(document.getElementById('teachHours').value);
            if (!hours || hours <= 0) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏™‡∏≠‡∏ô');
            
            const typeSelect = document.getElementById('teachType');
            const multiplier = parseFloat(typeSelect.value);
            const typeText = typeSelect.options[typeSelect.selectedIndex].text;
            
            const sizeSelect = document.getElementById('classSize');
            const bonus = parseFloat(sizeSelect.value);
            const sizeText = sizeSelect.options[sizeSelect.selectedIndex].text;

            // Calculation Logic: (Hours * (Multiplier + Bonus)) * Weeks/Year
            // Note: Bonus applies to multiplier. e.g. Base 3.0 + Bonus 0.1 = 3.1
            // Check if bonus applies to this type? Doc implies bonus is mainly for Lecture.
            // Simplified: Add bonus to multiplier.
            
            const finalMultiplier = multiplier + bonus;
            const workloadPerWeek = hours * finalMultiplier;
            const totalAnnual = workloadPerWeek * WEEKS_PER_YEAR_AVG; 

            const item = {
                id: Date.now(),
                desc: `${typeText} (${hours} ‡∏ä‡∏°./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå) [${sizeText}]`,
                annualValue: totalAnnual,
                weeklyValue: workloadPerWeek,
                type: 'teaching'
            };

            appState.teachingItems.push(item);
            document.getElementById('teachHours').value = ''; // Reset input
            renderLists();
            updateDashboard();
        }

        function addResearch() {
            const select = document.getElementById('researchType');
            const points = parseInt(select.value);
            const text = select.options[select.selectedIndex].text;

            const item = {
                id: Date.now(),
                desc: text,
                annualValue: points,
                weeklyValue: 0, // Research is lump sum usually
                type: 'research'
            };

            appState.researchItems.push(item);
            renderLists();
            updateDashboard();
        }

        function renderLists() {
            // Teaching List
            const tList = document.getElementById('teachingList');
            if (appState.teachingItems.length === 0) {
                tList.innerHTML = '<li class="text-slate-400 italic text-center py-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô</li>';
            } else {
                tList.innerHTML = appState.teachingItems.map(item => `
                    <li class="flex justify-between items-center bg-white p-2 rounded border border-slate-100 shadow-sm animate-fade-in">
                        <span>${item.desc}</span>
                        <span class="font-bold text-blue-600">+${Math.round(item.annualValue)} ‡∏ä‡∏°./‡∏õ‡∏µ</span>
                        <button onclick="removeItem(${item.id}, 'teaching')" class="text-red-400 hover:text-red-600 ml-2">√ó</button>
                    </li>
                `).join('');
            }

            // Research List
            const rList = document.getElementById('researchList');
            if (appState.researchItems.length === 0) {
                rList.innerHTML = '<li class="text-slate-400 italic text-center py-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</li>';
            } else {
                rList.innerHTML = appState.researchItems.map(item => `
                    <li class="flex justify-between items-center bg-white p-2 rounded border border-slate-100 shadow-sm animate-fade-in">
                        <span>${item.desc}</span>
                        <span class="font-bold text-rose-600">+${item.annualValue} ‡∏ä‡∏°.</span>
                        <button onclick="removeItem(${item.id}, 'research')" class="text-red-400 hover:text-red-600 ml-2">√ó</button>
                    </li>
                `).join('');
            }
        }

        function removeItem(id, type) {
            if (type === 'teaching') {
                appState.teachingItems = appState.teachingItems.filter(i => i.id !== id);
            } else {
                appState.researchItems = appState.researchItems.filter(i => i.id !== id);
            }
            renderLists();
            updateDashboard();
        }

        function resetData() {
            appState.teachingItems = [];
            appState.researchItems = [];
            renderLists();
            updateDashboard();
        }

        function updateDashboard() {
            // Calculate Totals
            appState.totalTeachingHours = appState.teachingItems.reduce((acc, curr) => acc + curr.annualValue, 0);
            appState.totalResearchHours = appState.researchItems.reduce((acc, curr) => acc + curr.annualValue, 0);
            appState.grandTotal = appState.totalTeachingHours + appState.totalResearchHours;

            // Update Text
            document.getElementById('totalAnnualHours').innerText = Math.round(appState.grandTotal).toLocaleString();
            
            // Weekly Avg
            const weeklyAvg = appState.grandTotal / WEEKS_FOR_CALC;
            document.getElementById('weeklyAvg').innerText = weeklyAvg.toFixed(1);
            
            // Weekly Bar width (capped at 100%)
            const pct = Math.min((weeklyAvg / 35) * 100, 100);
            const bar = document.getElementById('weeklyBar');
            bar.style.width = `${pct}%`;
            bar.className = `h-2.5 rounded-full ${pct >= 100 ? 'bg-emerald-500' : 'bg-blue-600'}`;

            // Gauge Status Text
            const diff = 1330 - appState.grandTotal;
            const statusEl = document.getElementById('gaugeStatus');
            if (diff <= 0) {
                statusEl.innerText = "üéâ ‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡πÅ‡∏•‡πâ‡∏ß!";
                statusEl.className = "text-sm font-medium mt-2 text-emerald-600";
            } else {
                statusEl.innerText = `‡∏¢‡∏±‡∏á‡∏Ç‡∏≤‡∏î‡∏≠‡∏µ‡∏Å ${Math.round(diff).toLocaleString()} ‡∏ä‡∏°.`;
                statusEl.className = "text-sm font-medium mt-2 text-rose-500";
            }

            // Update Charts
            updateCharts();
        }

        // --- CHARTS CONFIG ---

        function initCharts() {
            // 1. Gauge Chart (Doughnut)
            const ctxGauge = document.getElementById('gaugeChart').getContext('2d');
            gaugeChartInstance = new Chart(ctxGauge, {
                type: 'doughnut',
                data: {
                    labels: ['‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏•‡πâ‡∏ß', '‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠'],
                    datasets: [{
                        data: [0, 1330],
                        backgroundColor: ['#2563eb', '#e2e8f0'], // Blue, Slate-200
                        borderWidth: 0,
                        circumference: 360,
                        cutout: '80%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false }, tooltip: { enabled: false } },
                    animation: { duration: 1000 }
                }
            });

            // 2. Composition Chart (Pie)
            const ctxComp = document.getElementById('compositionChart').getContext('2d');
            compositionChartInstance = new Chart(ctxComp, {
                type: 'pie',
                data: {
                    labels: ['Teaching', 'Research/Service'],
                    datasets: [{
                        data: [0, 0], // Init 0
                        backgroundColor: ['#3b82f6', '#f43f5e']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { position: 'right', labels: { boxWidth: 12, font: {size: 10} } } 
                    }
                }
            });

            // 3. Teaching Multiplier Chart (Static)
            const ctxTeach = document.getElementById('teachingMultiplierChart').getContext('2d');
            new Chart(ctxTeach, {
                type: 'bar',
                data: {
                    labels: ['‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ ‡∏õ.‡∏ï‡∏£‡∏µ', '‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢ ‡∏õ.‡∏ï‡∏£‡∏µ', '‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢+‡∏ô‡∏®.100', '‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢ ‡∏õ.‡πÄ‡∏≠‡∏Å'],
                    datasets: [{
                        label: '‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì (Multiplier)',
                        data: [1.5, 3.0, 3.1, 4.0],
                        backgroundColor: ['#94a3b8', '#3b82f6', '#2563eb', '#1e40af'],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, max: 5 } }
                }
            });

            // 4. Research ROI Chart (Static)
            const ctxRes = document.getElementById('researchRoiChart').getContext('2d');
            
            // Wrap labels helper
            const labels = ['Proceeding', '‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° TCI 1', '‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° Inter', '‡∏ó‡∏∏‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢ >50k', '‡∏ï‡∏≥‡∏£‡∏≤/‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏ö‡∏±‡∏ï‡∏£'];
            
            new Chart(ctxRes, {
                type: 'bar',
                indexAxis: 'y',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ',
                        data: [80, 160, 200, 300, 350],
                        backgroundColor: ['#fda4af', '#f43f5e', '#e11d48', '#be123c', '#881337'],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { x: { beginAtZero: true } }
                }
            });
        }

        function updateCharts() {
            // Update Gauge
            const current = appState.grandTotal;
            const remaining = Math.max(0, 1330 - current);
            
            gaugeChartInstance.data.datasets[0].data = [current, remaining];
            gaugeChartInstance.data.datasets[0].backgroundColor = [
                current >= 1330 ? '#10b981' : '#2563eb', // Green if done, else Blue
                '#e2e8f0'
            ];
            gaugeChartInstance.update();

            // Update Composition
            // Handle empty state visualization
            if (appState.totalTeachingHours === 0 && appState.totalResearchHours === 0) {
                compositionChartInstance.data.datasets[0].data = [1, 0]; // Dummy
                compositionChartInstance.data.datasets[0].backgroundColor = ['#f1f5f9', '#f1f5f9'];
            } else {
                compositionChartInstance.data.datasets[0].data = [appState.totalTeachingHours, appState.totalResearchHours];
                compositionChartInstance.data.datasets[0].backgroundColor = ['#3b82f6', '#f43f5e'];
            }
            compositionChartInstance.update();
        }

    </script>
</body>
</html>